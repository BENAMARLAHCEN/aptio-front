<div class="bg-white rounded-lg shadow-lg p-8">
  <h2 class="text-2xl font-bold text-center mb-6">Create Account</h2>

  <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="space-y-4">
    <!-- Name Fields -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label for="firstName" class="block text-sm font-medium text-neutral-dark mb-1">
          First Name
        </label>
        <input
          id="firstName"
          type="text"
          formControlName="firstName"
          class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
          [ngClass]="{'border-status-error': isFieldInvalid('firstName')}"
        />
        <p *ngIf="isFieldInvalid('firstName')" class="mt-1 text-sm text-status-error">
          {{ getErrorMessage('firstName') }}
        </p>
      </div>

      <div>
        <label for="lastName" class="block text-sm font-medium text-neutral-dark mb-1">
          Last Name
        </label>
        <input
          id="lastName"
          type="text"
          formControlName="lastName"
          class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
          [ngClass]="{'border-status-error': isFieldInvalid('lastName')}"
        />
        <p *ngIf="isFieldInvalid('lastName')" class="mt-1 text-sm text-status-error">
          {{ getErrorMessage('lastName') }}
        </p>
      </div>
    </div>

    <!-- Username Field -->
    <div>
      <label for="username" class="block text-sm font-medium text-neutral-dark mb-1">
        Username
      </label>
      <input
        id="username"
        type="text"
        formControlName="username"
        class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
        [ngClass]="{'border-status-error': isFieldInvalid('username')}"
      />
      <p *ngIf="isFieldInvalid('username')" class="mt-1 text-sm text-status-error">
        {{ getErrorMessage('username') }}
      </p>
    </div>

    <!-- Email Field -->
    <div>
      <label for="email" class="block text-sm font-medium text-neutral-dark mb-1">
        Email
      </label>
      <input
        id="email"
        type="email"
        formControlName="email"
        class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
        [ngClass]="{'border-status-error': isFieldInvalid('email')}"
      />
      <p *ngIf="isFieldInvalid('email')" class="mt-1 text-sm text-status-error">
        {{ getErrorMessage('email') }}
      </p>
    </div>

    <!-- Password Field -->
    <div>
      <label for="password" class="block text-sm font-medium text-neutral-dark mb-1">
        Password
      </label>
      <input
        id="password"
        type="password"
        formControlName="password"
        class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
        [ngClass]="{'border-status-error': isFieldInvalid('password')}"
      />
      <p *ngIf="isFieldInvalid('password')" class="mt-1 text-sm text-status-error">
        {{ getErrorMessage('password') }}
      </p>
    </div>

    <!-- Phone Field -->
    <div>
      <label for="phone" class="block text-sm font-medium text-neutral-dark mb-1">
        Phone (Optional)
      </label>
      <input
        id="phone"
        type="tel"
        formControlName="phone"
        class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
      />
    </div>

    <!-- Address Section (Optional) -->
    <div>
      <div class="flex items-center mb-2">
        <h3 class="text-md font-medium text-neutral-dark">Address Information (Optional)</h3>
        <button
          type="button"
          (click)="toggleAddressFields()"
          class="ml-auto text-sm text-primary hover:text-primary-dark">
          {{ showAddressFields ? 'Hide' : 'Add Address' }}
        </button>
      </div>

      <div *ngIf="showAddressFields" formGroupName="address" class="space-y-4 p-4 border border-neutral-light rounded-lg">
        <!-- Street -->
        <div>
          <label for="street" class="block text-sm font-medium text-neutral-dark mb-1">
            Street
          </label>
          <input
            id="street"
            type="text"
            formControlName="street"
            class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
          />
        </div>

        <!-- City and State -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label for="city" class="block text-sm font-medium text-neutral-dark mb-1">
              City
            </label>
            <input
              id="city"
              type="text"
              formControlName="city"
              class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
            />
          </div>

          <div>
            <label for="state" class="block text-sm font-medium text-neutral-dark mb-1">
              State/Province
            </label>
            <input
              id="state"
              type="text"
              formControlName="state"
              class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
            />
          </div>
        </div>

        <!-- Zip and Country -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label for="zipCode" class="block text-sm font-medium text-neutral-dark mb-1">
              Zip/Postal Code
            </label>
            <input
              id="zipCode"
              type="text"
              formControlName="zipCode"
              class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
            />
          </div>

          <div>
            <label for="country" class="block text-sm font-medium text-neutral-dark mb-1">
              Country
            </label>
            <input
              id="country"
              type="text"
              formControlName="country"
              class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
            />
          </div>
        </div>
      </div>
    </div>

    <!-- Submit Button -->
    <button
      type="submit"
      class="w-full bg-primary text-white py-2 px-4 rounded-lg hover:bg-primary-dark
             focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary
             disabled:opacity-50 disabled:cursor-not-allowed"
      [disabled]="registerForm.invalid || isLoading"
    >
      <span class="flex items-center justify-center">
        <span *ngIf="isLoading" class="w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"></span>
        {{ isLoading ? 'Creating account...' : 'Create Account' }}
      </span>
    </button>

    <!-- Error Message -->
    <div *ngIf="errorMessage" class="p-3 bg-status-error bg-opacity-10 border border-status-error rounded-lg">
      <p class="text-sm text-status-error">{{ errorMessage }}</p>
    </div>

    <!-- Login Link -->
    <p class="text-center text-sm text-neutral">
      Already have an account?
      <a routerLink="/auth/login" class="text-primary hover:text-primary-dark">
        Sign in
      </a>
    </p>
  </form>
</div>
